<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:p="http://primefaces.org/ui"
                xmlns:pe="http://primefaces.org/ui/extensions"
                template="/Template/MasterTemplate.xhtml">
    <ui:define name="contenido">
    <f:view contentType="text/html">
        <h:head>
            <h:outputStylesheet name="Style_botones.css" library="css"/>
            <f:facet name="first">
                <meta content='text/html; charset=UTF-8' http-equiv="Content-Type"/>
                <title>Edificios</title> 
            </f:facet>
        </h:head>
        <h:body>
            <h:outputStylesheet name="Style.css" library="css"/>
            <h:form id="formUni" rendered="#{loginBean.tienePermiso}">
            <p:fieldset legend="Edificios">
                
<!--            <p:layoutUnit position="north" size="100" resizable="true" closable="true" collapsible="true" style="background-color: green">
                <p:graphicImage url="/img/titulo.png" style="padding-left: 12%" ></p:graphicImage>
                <p:graphicImage url="/img/UABC.PNG" style="width: 52px; padding-left: 12%"></p:graphicImage>
                </p:layoutUnit>
                ^ Forma original (Angel)

                <p:commandButton image="btnAU"/>
                <p:commandButton image="btnEU"/> Prueba
                <p:commandButton image="btnMU"/>                    -->
                
                <p:commandButton id="showAltaButton"  image="btnAU"  oncomplete="dlg.show();" iconPos="center" 
                                     rendered="#{loginBean.permisoAlta}"
                                     actionListener="#{unidadAcademicaBeanUI.nuevo}" update="uacap" title="Agregar"/>
                <p:commandButton id="showEliminarButton"  image="btnEU"  oncomplete="dlg.show();" iconPos="center" 
                                     rendered="#{loginBean.permisoBaja}"
                                      actionListener="#{unidadAcademicaBeanUI.eliminar}" update="uacap"  title="Eliminar"/><!--disabled="#{unidadAcademicaBeanUI.botones()}" -->
                <p:commandButton id="showModificarButton"  image="btnMU"  oncomplete="dlg.show();" iconPos="center" 
                                     rendered="#{loginBean.permisoModificar}"
                                     actionListener="#{unidadAcademicaBeanUI.modificar}" update="uacap" title="Modificar"/> <!--disabled="#{unidadAcademicaBeanUI.botones()}"-->
                <br/><br/>
                <!--header="#{unidadAcademicaBeanUI.header}"-->
                <p:dialog id="uacap" header="Edificios" widgetVar="dlg" draggable="true" 
                          resizable="true" showEffect="fade" 
                          hideEffect="explode" modal="true">
                    <p:ajax event="close" 
                            listener="#{unidadAcademicaBeanUI.limpiar()}"/>
                    
<!--                        <p:ajax event="close" update=":formUni:uniacademica, :formUni:showEliminarButton, :formUni:showModificarButton, :formUni:cap,:formUni:seleccionados" 
                            listener="#{unidadAcademicaBeanUI.limpiar()}"/>  < ESTE CODIGO COMENTADO ES LA FORMA ORIGINAL 

                            formUni(Nombre del form) : "seleccionados"(id de elementos)  ejemplo: <p:selectOneMenu id="seleccionados" (esta abajo de este)    --> 

<!--                    <p:outputLabel id="lblSeleccionados" rendered="#{unidadAcademicaBeanUI.mostrarSeleccionUA()}" value="Seleccione el registro a visualizar "></p:outputLabel>     
                        NO SE EN DONDE SE REFLEJA ESTA LINEA            -->
                       <br/>
<!--                       <p:selectOneMenu id="seleccionados" 
                                         value="#{unidadAcademicaBeanUI.unidadAcademicaBeanHelper.selecUnidadAcademica.uacid}"                                                    
                                         rendered="#{unidadAcademicaBeanUI.mostrarSeleccionUA()}"> 
                            <p:ajax event="valueChange" update="cap" listener="#{unidadAcademicaBeanUI.unidadAcademicaBeanHelper.seleccionarRegistro()}"></p:ajax>

                            <f:selectItems value="#{unidadAcademicaBeanUI.unidadAcademicaBeanHelper.listaSeleccionUA}"                                             
                                           var="unidadaca"                      
                                           itemLabel="#{unidadaca.uacnombre}"
                                           itemValue="#{unidadaca.uacid}"/>                                             

                        </p:selectOneMenu>-->

                        <p:panelGrid id="cap" style="margin-top: 20px; position: relative"> 
<!--                            <p:row>
                                <p:column>Campus</p:column>  
                                <p:column colspan="4" style="font-weight: bold;">
                                    <p:selectOneMenu id="campus" value="#{unidadAcademicaBeanUI.unidadAcademicaBeanHelper.campus.camid}" 
                                                     disabled="#{unidadAcademicaBeanUI.deshabilitar}">  
                                        <f:selectItem itemLabel="Seleccione el campus" itemValue="#{0}" />  
                                        <f:selectItems value="#{campusBeanUI.campusBeanHelper.campusDelegate.listaCampus}" 
                                                       var="cam"
                                                       itemLabel="#{cam.camnombre}"
                                                       itemValue="#{cam.camid}"/>
                                    </p:selectOneMenu>
                                </p:column>
                            </p:row>    Original Seleccion de Campus por Combobox -->
                            <p:row>
                                <p:column><p:outputLabel value="Edificio ID"/> </p:column>
                                <p:column><p:inputText value="#{EdificiosBean.edificio.edificioId}" disabled="true"/></p:column>
                            </p:row>
<!--                            <p:row>
                                <p:column><p:outputLabel value="Clave Unidad Académica"/></p:column>
                                <p:column><p:inputText size="3" maxlength="4" id="clave" value="#{unidadAcademicaBeanUI.unidadAcademicaBeanHelper.unidadacademica.uacclave}" 
                                                       disabled="#{unidadAcademicaBeanUI.deshabilitar}"/>
                                     <pe:keyFilter for="clave" regEx="/[0-9']/"/>
                                </p:column>
                            </p:row>  Original -->
                            <p:row>
                                <p:column><p:outputLabel value="Clave Edificio"/></p:column>
                                <p:column><p:inputText size="3" maxlength="4" id="clave" value="#{EdificiosBean.edificio.edificioClave}" 
                                                       />
                                     <pe:keyFilter for="clave" regEx="/[0-9']/"/> <!-- Validacion -->
                                </p:column>
                            </p:row>
<!--                            <p:row> 
                                <p:column><p:outputLabel value="Unidad Académica"/></p:column>
                                <p:column><p:inputText id="nomua" onkeyup="value = value.toUpperCase()" value="#{unidadAcademicaBeanUI.unidadAcademicaBeanHelper.unidadacademica.uacnombre}" 
                                                       disabled="#{unidadAcademicaBeanUI.deshabilitar}"/>
                                    <pe:keyFilter for="nomua" regEx="/[a-z''A-Z ]/"/>
                                </p:column>
                            </p:row>  Original -->
                            <p:row> 
                                <p:column><p:outputLabel value="Nombre Edificio"/></p:column>
                                <p:column><p:inputText id="nomua" onkeyup="value = value.toUpperCase()" value="#{EdificiosBean.edificio.nombreEdificio}" 
                                                      />
                                    <pe:keyFilter for="nomua" regEx="/[a-z''A-Z ]/"/> <!-- Validacion -->
                                </p:column>
                            </p:row>
                            <p:row>
                                <p:column><p:outputLabel value="Numero de plantas"/></p:column>
                                <p:column><p:inputText size="3" maxlength="1" id="plantas" value="#{EdificiosBean.edificio.plantas}" 
                                                       />
                                     <pe:keyFilter for="plantas" regEx="/[0-9']/"/> <!-- Validacion -->
                                </p:column>
                            </p:row>
                            <p:row>
                                <p:column><p:outputLabel value="Salones"/></p:column>
                                <p:column><p:inputText size="3" maxlength="3" id="salones" value="#{EdificiosBean.edificio.salones}" 
                                                       />
                                     <pe:keyFilter for="salones" regEx="/[0-9']/"/> <!-- Validacion -->
                                </p:column>
                            </p:row>
                        </p:panelGrid>
                    <br/>
                    <center>
                        <p:commandButton value="Aceptar" image="btnGuardar" action="#{unidadAcademicaBeanUI.onClickSubmit()}" >
                            <p:ajax event="click" />
                            </p:commandButton>
                        <p:commandButton value="Cancelar" image="btnCancelar" oncomplete="dlg.hide()" disabled="">
                            <p:ajax event="click" listener="#{unidadAcademicaBeanUI.limpiar()}" />  
                            </p:commandButton>
                        </center>
                </p:dialog>
<!--                <p:layoutUnit position="west" size="400" header="Agregar Edificio" collapsible="true">
                <h:form id="insertar">
                    <p:panelGrid columns="3">
                        <p:outputLabel value="Edificio ID"/> 
                        <p:inputText value="#{EdificiosBean.edificio.edificioId}" disabled="true"/>
                        <p:outputLabel value=""/>
                        <p:outputLabel for="default1" value="Clave Edificio"/> 
                         <p:inputText value="#{EdificiosBean.edificio.edificioClave}" id="default1" required="true"/>
                         <p:message for="default1"/>
                        <p:outputLabel for="default2" value="Nombre Edificio"/>
                        <p:inputText value="#{EdificiosBean.edificio.nombreEdificio}" id="default2" required="true" />
                        <p:message for="default2"/>
                        <p:outputLabel for="default3" value="Numero de plantas"/>
                        <p:inputText value="#{EdificiosBean.edificio.plantas}" id="default3" required="true" />
                        <p:message for="default3"/>

                    </p:panelGrid>

                    <p:commandButton actionListener="#{EdificiosBean.addEdificio()}" value="Ingresar Edificio" update="insertar"/>

                </h:form>
            </p:layoutUnit>-->

                    <p:dataTable var="edificio" value="#{EdificiosBean.edificios}" rows="10"
                                 paginator="true"
                                 paginatorTemplate="{CurrentPageReport}  {FirstPageLink} 
                                 {PreviousPageLink} {PageLinks} 
                                 {NextPageLink} {LastPageLink} 
                                 {RowsPerPageDropdown}"
                                 rowsPerPageTemplate="5,10,15">

                        <p:column headerText="Id Edificio">
                            <h:outputText value="#{edificio.edificioId}" />
                        </p:column>
                          <p:column headerText="Clave Edificio">
                            <h:outputText value="#{edificio.edificioClave}" />
                        </p:column>
                        <p:column headerText="Nombre Edificio">
                            <h:outputText value="#{edificio.nombreEdificio}" />
                        </p:column>
                        <p:column headerText="Numero de plantas">
                            <h:outputText value="#{edificio.plantas}" />
                        </p:column>
                        <p:column headerText="Unidad Academica">
                            <h:outputText value="#{edificio.plantas}" />
                        </p:column>
                        <p:column headerText="Salones">
                            <h:outputText value="#{edificio.plantas}" />
                        </p:column>



                        </p:dataTable>      
            </p:fieldset>
            </h:form>
        </h:body>
    </f:view>
    </ui:define>
</ui:composition>
